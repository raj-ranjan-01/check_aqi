package com.example.aqi.service;

import org.springframework.stereotype.Component;

@Component
public class AqiApiClient {

    @Value("${aqi.api.token}")
    private String token;

    private final WebClient webClient = WebClient.create();

    public String fetchByCity(String city) {
        return webClient.get()
            .uri("https://api.waqi.info/feed/{city}/?token={token}", city, token)
            .retrieve()
            .bodyToMono(String.class)
            .block();
    }
}
